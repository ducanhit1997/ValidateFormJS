<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script>
        // $(document).ready(function () {
        //     $("#btnSubmit").click(function (e) {
        //         e.preventDefault();
        //         // mỗi lần submit thì phải xóa lại để rỗng lại thẻ div có id là err
        //         document.getElementById('err').innerHTML = '';

        //         // khai báo một mảng rỗng
        //         var listError = [];

        //         // lấy giá trị ô input có id là firstname
        //         var firstname = document.getElementById("firstname").value;

        //         // lấy giá trị ô input có id là lastname
        //         var lastname = document.getElementById("lastname").value;

        //         var year = document.getElementById("year").value;
        //         var month = document.getElementById("month").value;
        //         var day = document.getElementById("day").value;
        //         //kiểm tra nếu firsrname rỗng thì add vô listError một cái key đặt tên là First name
        //         // tương tự với lastname
        //         if (firstname == '') {
        //             listError.push({
        //                 key: 'First name',
        //             })
        //         }
        //         if (lastname == '') {
        //             listError.push({
        //                 key: 'Last name',
        //             })
        //         }
        //         if (year == '' || month == '' || day == '') {
        //             listError.push({
        //                 key: 'Date'
        //             })
        //         }
        //         listError.forEach(function (item) {
        //             document.getElementById('err').innerHTML += item.key + ' , '
        //         });
        //         alert('Các trường không được để trống: ' + $('#err').html());
        //     });
        // });
        // $(document).ready(function () {
        //     const monthNames = ["January", "February", "March", "April", "May", "June",
        //         "July", "August", "September", "October", "November", "December"
        //     ];
        //     var qntYears = 100;
        //     var selectYear = $("#year");
        //     var selectMonth = $("#month");
        //     var selectDay = $("#day");
        //     var currentYear = new Date().getFullYear();

        //     for (var y = 0; y <= qntYears; y++) {
        //         var yearElem = document.createElement("option");
        //         yearElem.value = currentYear
        //         yearElem.textContent = currentYear;
        //         selectYear.append(yearElem);
        //         currentYear--;
        //     }

        //     for (var m = 1; m <= 12; m++) {
        //         var monthElem = document.createElement("option");
        //         monthElem.value = m;
        //         monthElem.textContent = m;
        //         selectMonth.append(monthElem);
        //     }

        //     var d = new Date();
        //     //var month = d.getMonth();
        //     var day = d.getDate();

        //     selectYear.val(year);
        //     selectYear.on("change", AdjustDays);
        //     selectMonth.val(month);
        //     selectMonth.on("change", AdjustDays);

        //     AdjustDays();
        //     selectDay.val(day)

        //     function AdjustDays() {
        //         var year = selectYear.val();
        //         var month = parseInt(selectMonth.val());
        //         selectDay.empty();

        //         //get the last day, so the number of days in that month
        //         var days = new Date(year, month, 0).getDate();

        //         //lets create the days of that month
        //         for (var d = 1; d <= days; d++) {
        //             var dayElem = document.createElement("option");
        //             dayElem.value = d;
        //             dayElem.textContent = d;
        //             selectDay.append(dayElem);
        //         }
        //     }
        // });
        var data = [
            {
                "userId": 1,
                "id": 1,
                "title": "delectus aut autem",
                "completed": false
            },
            {
                "userId": 1,
                "id": 2,
                "title": "quis ut nam facilis et officia qui",
                "completed": false
            },
            {
                "userId": 1,
                "id": 3,
                "title": "fugiat veniam minus",
                "completed": false
            },
            {
                "userId": 1,
                "id": 4,
                "title": "et porro tempora",
                "completed": true
            },
            {
                "userId": 1,
                "id": 5,
                "title": "laboriosam mollitia et enim quasi adipisci quia provident illum",
                "completed": false
            },
            {
                "userId": 1,
                "id": 6,
                "title": "qui ullam ratione quibusdam voluptatem quia omnis",
                "completed": false
            },
            {
                "userId": 1,
                "id": 7,
                "title": "illo expedita consequatur quia in",
                "completed": false
            },
            {
                "userId": 1,
                "id": 8,
                "title": "quo adipisci enim quam ut ab",
                "completed": true
            },
            {
                "userId": 1,
                "id": 9,
                "title": "molestiae perspiciatis ipsa",
                "completed": false
            },
            {
                "userId": 1,
                "id": 10,
                "title": "illo est ratione doloremque quia maiores aut",
                "completed": true
            },
            {
                "userId": 1,
                "id": 11,
                "title": "vero rerum temporibus dolor",
                "completed": true
            },
            {
                "userId": 1,
                "id": 12,
                "title": "ipsa repellendus fugit nisi",
                "completed": true
            },
            {
                "userId": 1,
                "id": 13,
                "title": "et doloremque nulla",
                "completed": false
            },
            {
                "userId": 1,
                "id": 14,
                "title": "repellendus sunt dolores architecto voluptatum",
                "completed": true
            },
            {
                "userId": 1,
                "id": 15,
                "title": "ab voluptatum amet voluptas",
                "completed": true
            },
            {
                "userId": 1,
                "id": 16,
                "title": "accusamus eos facilis sint et aut voluptatem",
                "completed": true
            },
            {
                "userId": 1,
                "id": 17,
                "title": "quo laboriosam deleniti aut qui",
                "completed": true
            },
            {
                "userId": 1,
                "id": 18,
                "title": "dolorum est consequatur ea mollitia in culpa",
                "completed": false
            },
            {
                "userId": 1,
                "id": 19,
                "title": "molestiae ipsa aut voluptatibus pariatur dolor nihil",
                "completed": true
            },
            {
                "userId": 1,
                "id": 20,
                "title": "ullam nobis libero sapiente ad optio sint",
                "completed": true
            },
            {
                "userId": 2,
                "id": 21,
                "title": "suscipit repellat esse quibusdam voluptatem incidunt",
                "completed": false
            },
            {
                "userId": 2,
                "id": 22,
                "title": "distinctio vitae autem nihil ut molestias quo",
                "completed": true
            },
            {
                "userId": 2,
                "id": 23,
                "title": "et itaque necessitatibus maxime molestiae qui quas velit",
                "completed": false
            },
            {
                "userId": 2,
                "id": 24,
                "title": "adipisci non ad dicta qui amet quaerat doloribus ea",
                "completed": false
            },
            {
                "userId": 2,
                "id": 25,
                "title": "voluptas quo tenetur perspiciatis explicabo natus",
                "completed": true
            },
            {
                "userId": 2,
                "id": 26,
                "title": "aliquam aut quasi",
                "completed": true
            },
            {
                "userId": 2,
                "id": 27,
                "title": "veritatis pariatur delectus",
                "completed": true
            },
            {
                "userId": 2,
                "id": 28,
                "title": "nesciunt totam sit blanditiis sit",
                "completed": false
            },
            {
                "userId": 2,
                "id": 29,
                "title": "laborum aut in quam",
                "completed": false
            },
            {
                "userId": 2,
                "id": 30,
                "title": "nemo perspiciatis repellat ut dolor libero commodi blanditiis omnis",
                "completed": true
            },
            {
                "userId": 2,
                "id": 31,
                "title": "repudiandae totam in est sint facere fuga",
                "completed": false
            },
            {
                "userId": 2,
                "id": 32,
                "title": "earum doloribus ea doloremque quis",
                "completed": false
            },
            {
                "userId": 2,
                "id": 33,
                "title": "sint sit aut vero",
                "completed": false
            },
            {
                "userId": 2,
                "id": 34,
                "title": "porro aut necessitatibus eaque distinctio",
                "completed": false
            },
            {
                "userId": 2,
                "id": 35,
                "title": "repellendus veritatis molestias dicta incidunt",
                "completed": true
            },
            {
                "userId": 2,
                "id": 36,
                "title": "excepturi deleniti adipisci voluptatem et neque optio illum ad",
                "completed": true
            },
            {
                "userId": 2,
                "id": 37,
                "title": "sunt cum tempora",
                "completed": false
            },
            {
                "userId": 2,
                "id": 38,
                "title": "totam quia non",
                "completed": false
            },
            {
                "userId": 2,
                "id": 39,
                "title": "doloremque quibusdam asperiores libero corrupti illum qui omnis",
                "completed": false
            },
            {
                "userId": 2,
                "id": 40,
                "title": "totam atque quo nesciunt",
                "completed": true
            },
            {
                "userId": 3,
                "id": 41,
                "title": "aliquid amet impedit consequatur aspernatur placeat eaque fugiat suscipit",
                "completed": false
            },
            {
                "userId": 3,
                "id": 42,
                "title": "rerum perferendis error quia ut eveniet",
                "completed": false
            },
            {
                "userId": 3,
                "id": 43,
                "title": "tempore ut sint quis recusandae",
                "completed": true
            },
            {
                "userId": 3,
                "id": 44,
                "title": "cum debitis quis accusamus doloremque ipsa natus sapiente omnis",
                "completed": true
            },
            {
                "userId": 3,
                "id": 45,
                "title": "velit soluta adipisci molestias reiciendis harum",
                "completed": false
            },
            {
                "userId": 3,
                "id": 46,
                "title": "vel voluptatem repellat nihil placeat corporis",
                "completed": false
            },
            {
                "userId": 3,
                "id": 47,
                "title": "nam qui rerum fugiat accusamus",
                "completed": false
            },
            {
                "userId": 3,
                "id": 48,
                "title": "sit reprehenderit omnis quia",
                "completed": false
            },
            {
                "userId": 3,
                "id": 49,
                "title": "ut necessitatibus aut maiores debitis officia blanditiis velit et",
                "completed": false
            },
            {
                "userId": 3,
                "id": 56,
                "title": "deleniti ea temporibus enim",
                "completed": true
            },
            {
                "userId": 3,
                "id": 57,
                "title": "pariatur et magnam ea doloribus similique voluptatem rerum quia",
                "completed": false
            },
            {
                "userId": 3,
                "id": 58,
                "title": "est dicta totam qui explicabo doloribus qui dignissimos",
                "completed": false
            },
            {
                "userId": 3,
                "id": 59,
                "title": "perspiciatis velit id laborum placeat iusto et aliquam odio",
                "completed": false
            },
            {
                "userId": 3,
                "id": 60,
                "title": "et sequi qui architecto ut adipisci",
                "completed": true
            },
            {
                "userId": 4,
                "id": 77,
                "title": "maiores aut nesciunt delectus exercitationem vel assumenda eligendi at",
                "completed": false
            },
            {
                "userId": 4,
                "id": 78,
                "title": "reiciendis est magnam amet nemo iste recusandae impedit quaerat",
                "completed": false
            },
            {
                "userId": 4,
                "id": 79,
                "title": "eum ipsa maxime ut",
                "completed": true
            },
            {
                "userId": 4,
                "id": 80,
                "title": "tempore molestias dolores rerum sequi voluptates ipsum consequatur",
                "completed": true
            },
            {
                "userId": 5,
                "id": 81,
                "title": "suscipit qui totam",
                "completed": true
            },
            {
                "userId": 5,
                "id": 88,
                "title": "vitae aut excepturi laboriosam sint aliquam et et accusantium",
                "completed": false
            },
            {
                "userId": 5,
                "id": 89,
                "title": "sequi ut omnis et",
                "completed": true
            },
            {
                "userId": 5,
                "id": 90,
                "title": "molestiae nisi accusantium tenetur dolorem et",
                "completed": true
            },
            {
                "userId": 5,
                "id": 91,
                "title": "nulla quis consequatur saepe qui id expedita",
                "completed": true
            },
            {
                "userId": 5,
                "id": 92,
                "title": "in omnis laboriosam",
                "completed": true
            },
            {
                "userId": 5,
                "id": 93,
                "title": "odio iure consequatur molestiae quibusdam necessitatibus quia sint",
                "completed": true
            },
            {
                "userId": 5,
                "id": 94,
                "title": "facilis modi saepe mollitia",
                "completed": false
            },
            {
                "userId": 5,
                "id": 95,
                "title": "vel nihil et molestiae iusto assumenda nemo quo ut",
                "completed": true
            },
            {
                "userId": 5,
                "id": 96,
                "title": "nobis suscipit ducimus enim asperiores voluptas",
                "completed": false
            },
            {
                "userId": 5,
                "id": 97,
                "title": "dolorum laboriosam eos qui iure aliquam",
                "completed": false
            },
            {
                "userId": 6,
                "id": 111,
                "title": "magni accusantium labore et id quis provident",
                "completed": false
            },
            {
                "userId": 6,
                "id": 112,
                "title": "consectetur impedit quisquam qui deserunt non rerum consequuntur eius",
                "completed": false
            },
            {
                "userId": 6,
                "id": 113,
                "title": "quia atque aliquam sunt impedit voluptatum rerum assumenda nisi",
                "completed": false
            },
            {
                "userId": 6,
                "id": 114,
                "title": "cupiditate quos possimus corporis quisquam exercitationem beatae",
                "completed": false
            },
            {
                "userId": 6,
                "id": 115,
                "title": "sed et ea eum",
                "completed": false
            },
            {
                "userId": 6,
                "id": 116,
                "title": "ipsa dolores vel facilis ut",
                "completed": true
            },
            {
                "userId": 6,
                "id": 117,
                "title": "sequi quae est et qui qui eveniet asperiores",
                "completed": false
            },
            {
                "userId": 6,
                "id": 118,
                "title": "quia modi consequatur vero fugiat",
                "completed": false
            },
            {
                "userId": 6,
                "id": 119,
                "title": "corporis ducimus ea perspiciatis iste",
                "completed": false
            },
            {
                "userId": 7,
                "id": 136,
                "title": "asperiores illo tempora fuga sed ut quasi adipisci",
                "completed": false
            },
            {
                "userId": 7,
                "id": 137,
                "title": "qui sit non",
                "completed": false
            },
            {
                "userId": 7,
                "id": 138,
                "title": "placeat minima consequatur rem qui ut",
                "completed": true
            },
            {
                "userId": 7,
                "id": 139,
                "title": "consequatur doloribus id possimus voluptas a voluptatem",
                "completed": false
            },
            {
                "userId": 7,
                "id": 140,
                "title": "aut consectetur in blanditiis deserunt quia sed laboriosam",
                "completed": true
            },
            {
                "userId": 8,
                "id": 141,
                "title": "explicabo consectetur debitis voluptates quas quae culpa rerum non",
                "completed": true
            },
            {
                "userId": 9,
                "id": 172,
                "title": "et provident amet rerum consectetur et voluptatum",
                "completed": false
            },
            {
                "userId": 9,
                "id": 173,
                "title": "harum ad aperiam quis",
                "completed": false
            },
            {
                "userId": 9,
                "id": 174,
                "title": "similique aut quo",
                "completed": false
            },
            {
                "userId": 9,
                "id": 175,
                "title": "laudantium eius officia perferendis provident perspiciatis asperiores",
                "completed": true
            },
            {
                "userId": 9,
                "id": 176,
                "title": "magni soluta corrupti ut maiores rem quidem",
                "completed": false
            },
            {
                "userId": 9,
                "id": 177,
                "title": "et placeat temporibus voluptas est tempora quos quibusdam",
                "completed": false
            },
            {
                "userId": 9,
                "id": 178,
                "title": "nesciunt itaque commodi tempore",
                "completed": true
            },
            {
                "userId": 9,
                "id": 179,
                "title": "omnis consequuntur cupiditate impedit itaque ipsam quo",
                "completed": true
            },
            {
                "userId": 10,
                "id": 199,
                "title": "numquam repellendus a magnam",
                "completed": true
            },
            {
                "userId": 10,
                "id": 200,
                "title": "ipsam aperiam voluptates qui",
                "completed": false
            }
        ]
            
        // output => [
        //     {
        //         "userId": 1,
        //         "id": 1,
        //         "title": "delectus aut autem",
        //         "completed": false
        //     },
        // ]

        let allData = getAllDataFromDataResponse(data, 'userId');
        console.log("all data ::::",allData);
        
        let count = countObjectByParam("userId", data);
        console.log("count data ::::", count);

        let sum = sumObjectByParam("userId", data, "id");
        console.log("sum data ::::", sum);

        let max = maxObjectByParam("userId", data, "id");
        console.log("max data ::::", max);

        let min = minObjectByParam("userId", data, "id");
        console.log("min data ::::", min);

        let avg = avgObjectByParam("userId", data, "id");
        console.log("avg data ::::", avg)

        function getAllDataFromDataResponse(dataResponse, filterParam){
            var dataReturn = [];
            dataResponse.forEach(function(element){
                var checkDuplicate = checkDuplicateElementOfArray(dataReturn, element, filterParam);
                if(!checkDuplicate){
                    dataReturn.push(element)
                }
            })

            return dataReturn;
        }
        //output : [10, 20, ..., 23]
        function countObjectByParam(filterParam, dataResponse){
            var dataUserId = getAllDataFromDataResponse(dataResponse, filterParam);
            var dataReturn = [];
            dataUserId.forEach(function(item){
                let countObjectByParam = 0;
                dataResponse.forEach(function(element){
                    if(item[filterParam] === element[filterParam]){
                        countObjectByParam = countObjectByParam+1;
                    }
                })
                dataReturn.push(countObjectByParam);
            })
            return dataReturn;
        }

        function sumObjectByParam(filterParam, dataResponse, sumAttr){
            var dataUserId = getAllDataFromDataResponse(dataResponse, filterParam);
            var dataReturn = [];
            dataUserId.forEach(function(item){
                let countObjectByParam = 0;
                dataResponse.forEach(function(element){
                    if(item[filterParam] === element[filterParam]){
                        countObjectByParam = countObjectByParam + element[sumAttr];
                    }
                })
                dataReturn.push(countObjectByParam);
            })
            return dataReturn;
        }

        function maxObjectByParam(filterParam, dataResponse, maxAttr){
            var dataReturn = [];
            var dataByFilterParram = getAllDataFromDataResponse(dataResponse, filterParam);
            //Browser data by filter param
            dataByFilterParram.forEach(function(item){
                var max = Number.MIN_SAFE_INTEGER;
                //find max value by filter parram
                dataResponse.forEach(function(element){
                    if(item[filterParam] === element[filterParam]){
                        if(element[maxAttr] > max){
                            max = element[maxAttr]; 
                        }
                    }
                })
                dataReturn.push(max)
            })

            return dataReturn;
        }

        
        function minObjectByParam(filterParam, dataResponse, maxAttr){
            var dataReturn = [];
            var dataByFilterParram = getAllDataFromDataResponse(dataResponse, filterParam);
            //Browser data by filter param
            dataByFilterParram.forEach(function(item){
                var min = Number.MAX_SAFE_INTEGER;
                //find max value by filter parram
                dataResponse.forEach(function(element){
                    if(item[filterParam] === element[filterParam]){
                        if(element[maxAttr] < min){
                            min = element[maxAttr];
                        }
                    }
                })
                dataReturn.push(min)
            })

            return dataReturn;
        }

        function avgObjectByParam(filterParam, dataResponse, avgAttr) {
            var dataReturn = [];
            var dataByFilterParram = getAllDataFromDataResponse(dataResponse, filterParam);
            var totalElement = countObjectByParam(filterParam, dataResponse);
            var sumElement = sumObjectByParam(filterParam, dataResponse, avgAttr);
            for(let i = 0; i < dataByFilterParram.length; i++){
                let avg = sumElement[i]/totalElement[i];
                dataReturn.push(avg);
            }
            return dataReturn;
        }


        function checkDuplicateElementOfArray(arrayData, item, filterParam){
            var flag = false;
            arrayData.forEach(function(element) {
               if(element[filterParam] === item[filterParam]) {
                   flag = true;
                   return flag
               }
            });
            return flag;
        }

    </script>
</head>

<body>
    <form>
        First name:<br>
        <input type="text" id="firstname">
        <br>
        Last name:<br>
        <input type="text" id="lastname">
        <br />
        Ngày sinh: <br />
        <select id="year">
        </select>
        <select id="month">
        </select>
        <select id="day"></select>
        <br /><br />
        <button id="btnSubmit">Submit</button>
    </form>
    <div id="err" hidden></div>
</body>

</html>